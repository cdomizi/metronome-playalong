var b=["e2","f2","g2","a2","b2","c3","d3","e3","f3","g3","a3","b3","c4"];function M(){let e=Math.floor(Math.random()*b.length);return`./static/images/${b[e]}.svg`}var V=document.querySelector("img#note");function d(e){V.setAttribute("src",e)}var G=document.querySelector("#staff-container");function T(){let e=M();if(!e){console.error("Error: Could not get SVG file."),G.textContent="An error occurred: Cannot display a new note.";return}d(e)}async function E(e,t){let n=await L("./static/audio/metronome-high.mp3"),o=await L("./static/audio/metronome-low.mp3"),u=0;function N(){u%t===0?(n.currentTime=0,n.play(),T()):(o.currentTime=0,o.play()),u++,u>=t&&(u=0)}return setInterval(N,e)}function L(e){return new Promise((t,n)=>{let o=new Audio(e);o.addEventListener("canplaythrough",()=>{t(o)},!1),o.addEventListener("error",()=>{n(new Error("Failed to load audio: "+e))},!1),o.load()})}var k="./static/images/empty-staff.svg";d(k);function y(e,t){t.disabled=e}function p(e,t,n,o){let u=(o??!0)&&t>=e-1;y(u,n)}function g(e,t,n,o){let u=(o??!0)&&t<=e+1;y(u,n)}var i={defaultTempo:90,minBpm:1,maxBpm:360},s=i.defaultTempo,w=document.querySelector("#tempo-value");function C(e){return 60*1e3/e}var f=C(s),m=document.querySelector("#tempo-slider");m.value=s.toString();w.textContent=m.value;function I(e){m.value=e,w.textContent=m.value,s=parseInt(e),f=C(s);let t=new Event("tempoChange");r&&l.dispatchEvent(t)}function D(e){let t=e.target.value;I(t)}m.addEventListener("change",D);var v=document.querySelector("#tempo-button-up"),S=document.querySelector("#tempo-button-down");p(i.maxBpm,s,v);g(i.minBpm,s,S);function P(e){let t=e.target.id==="tempo-button-up"||e.target.id==="tempo-button-up-icon";p(i.maxBpm,s,v,t),g(i.minBpm,s,S,!t);let n=t?"increment":"decrement",o=new Event(n);m.dispatchEvent(o)}v.addEventListener("click",P);S.addEventListener("click",P);function H(e){e.stopPropagation();let t=e.type==="increment",n=parseInt(m.value),o=t?n+1:n-1;I(o.toString())}m.addEventListener("increment",H);m.addEventListener("decrement",H);var c={defaultBeatsPerMeasure:4,minBeatsPerMeasure:1,maxBeatsPerMeasure:4},a=c.defaultBeatsPerMeasure,x=document.querySelector("#time-signature-value");x.textContent=a.toString();var h=document.querySelector("#time-signature-button-up"),B=document.querySelector("#time-signature-button-down");p(c.maxBeatsPerMeasure,a,h);g(c.minBeatsPerMeasure,a,B);function q(e){e.stopPropagation();let t=e.target.id==="time-signature-button-up";p(c.maxBeatsPerMeasure,a,h,t),g(c.minBeatsPerMeasure,a,B,!t),a=t?++a:--a,x.textContent=a.toString();let n=new Event("timeSignatureChange");r&&l.dispatchEvent(n)}h.addEventListener("click",q);B.addEventListener("click",q);var r,l=document.querySelector("#metronome-toggle-button"),U=document.querySelector("#staff-container");l.addEventListener("click",async()=>{let e=document.querySelector("#metronome-button-play-icon"),t=document.querySelector("#metronome-button-pause-icon");r?(clearInterval(r),r=null,e.setAttribute("class",""),t.setAttribute("class","hidden")):(r=await E(f,a),e.setAttribute("class","hidden"),t.setAttribute("class",""),U.scrollIntoView())});async function A(){r&&(clearInterval(r),r=null,r=await E(f,a))}l.addEventListener("tempoChange",A);l.addEventListener("timeSignatureChange",A);
//# sourceMappingURL=main.js.map