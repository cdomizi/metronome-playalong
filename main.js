async function D(){let e=await(await fetch("./static/images")).text(),a=new DOMParser().parseFromString(e,"text/html").querySelectorAll("a");if(!a.length)throw Error("Document does not contain SVG element");return Array.from(a).map(d=>d.href).filter(d=>d.endsWith(".svg")&&!d.toLowerCase().includes("staff"))}async function T(){let t=await D(),e=Math.floor(Math.random()*t.length);return t[e]}var G=document.querySelector("img#note");function p(t){G.setAttribute("src",t);}var k=document.querySelector("#staff-container");async function y(){let t=await T();if(!t){console.error("Error: Could not get SVG file."),k.textContent="An error occurred: Cannot display a new note.";return}p(t);}async function E(t,e){let n=await L("../static/audio/metronome-high.mp3"),o=await L("../static/audio/metronome-low.mp3"),a=0;function b(){a%e===0?(n.currentTime=0,n.play(),y()):(o.currentTime=0,o.play()),a++,a>=e&&(a=0);}return setInterval(b,t)}function L(t){return new Promise((e,n)=>{let o=new Audio(t);o.addEventListener("canplaythrough",()=>{e(o);},!1),o.addEventListener("error",()=>{n(new Error("Failed to load audio: "+t));},!1),o.load();})}var U="./static/images/empty-staff.svg";p(U);function w(t,e){e.disabled=t;}function g(t,e,n,o){let a=(o??!0)&&e>=t-1;w(a,n);}function f(t,e,n,o){let a=(o??!0)&&e<=t+1;w(a,n);}var i={defaultTempo:90,minBpm:1,maxBpm:360},m=i.defaultTempo,C=document.querySelector("#tempo-value");function P(t){return 60*1e3/t}var h=P(m),u=document.querySelector("#tempo-slider");u.value=m.toString();C.textContent=u.value;function I(t){u.value=t,C.textContent=u.value,m=parseInt(t),h=P(m);let e=new Event("tempoChange");s&&l.dispatchEvent(e);}function F(t){let e=t.target.value;I(e);}u.addEventListener("change",F);var v=document.querySelector("#tempo-button-up"),S=document.querySelector("#tempo-button-down");g(i.maxBpm,m,v);f(i.minBpm,m,S);function H(t){let e=t.target.id==="tempo-button-up"||t.target.id==="tempo-button-up-icon";g(i.maxBpm,m,v,e),f(i.minBpm,m,S,!e);let n=e?"increment":"decrement",o=new Event(n);u.dispatchEvent(o);}v.addEventListener("click",H);S.addEventListener("click",H);function x(t){t.stopPropagation();let e=t.type==="increment",n=parseInt(u.value),o=e?n+1:n-1;I(o.toString());}u.addEventListener("increment",x);u.addEventListener("decrement",x);var c={defaultBeatsPerMeasure:4,minBeatsPerMeasure:1,maxBeatsPerMeasure:4},r=c.defaultBeatsPerMeasure,q=document.querySelector("#time-signature-value");q.textContent=r.toString();var B=document.querySelector("#time-signature-button-up"),M=document.querySelector("#time-signature-button-down");g(c.maxBeatsPerMeasure,r,B);f(c.minBeatsPerMeasure,r,M);function A(t){t.stopPropagation();let e=t.target.id==="time-signature-button-up";g(c.maxBeatsPerMeasure,r,B,e),f(c.minBeatsPerMeasure,r,M,!e),r=e?++r:--r,q.textContent=r.toString();let n=new Event("timeSignatureChange");s&&l.dispatchEvent(n);}B.addEventListener("click",A);M.addEventListener("click",A);var s,l=document.querySelector("#metronome-toggle-button"),V=document.querySelector("staff-container");l.addEventListener("click",async()=>{let t=document.querySelector("#metronome-button-play-icon"),e=document.querySelector("#metronome-button-pause-icon");s?(clearInterval(s),s=null,t.setAttribute("class",""),e.setAttribute("class","hidden")):(s=await E(h,r),t.setAttribute("class","hidden"),e.setAttribute("class",""),V.scrollIntoView());});async function N(){s&&(clearInterval(s),s=null,s=await E(h,r),V.scrollIntoView());}l.addEventListener("tempoChange",N);l.addEventListener("timeSignatureChange",N);//# sourceMappingURL=main.js.map
//# sourceMappingURL=main.js.map